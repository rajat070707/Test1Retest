import * as tslib_1 from "tslib";
import { Injectable, EventEmitter } from '@angular/core';
let AngularPaginatorService = class AngularPaginatorService {
    constructor() {
        /** id is used to identify pagination instances */
        this.id = 'ANGULAR_PAGINATOR_DEFAULT';
        /** instances is the collection of pagination componetns */
        this.instances = {};
        /** emits an event with instance id whenever the page number changes */
        this.change = new EventEmitter();
    }
    /**
     * creates an instance for every pipe differentiated with id
     *
     * @param instance each instance refers to a unique pagination component
     */
    registerInstance(instance) {
        if (!this.instances[instance.id]) {
            this.instances[instance.id] = instance;
            this.change.emit(instance.id);
        }
        else {
            const changed = this.updateInstance(instance);
            if (changed) {
                this.change.emit(instance.id);
            }
        }
        return;
    }
    /**
     * updates existing pagination instances available
     * and returns true if value has changed
     *
     * @param instance an unique pagination component
     */
    updateInstance(instance) {
        for (const key in instance) {
            if (instance[key] !== this.instances[instance.id][key]) {
                this.instances[instance.id][key] = instance[key];
                return true;
            }
        }
        return false;
    }
    /**
     * return instance with given id
     *
     * @param id unique id of the pagination component
     */
    getInstance(id) {
        return this.instances[id];
    }
    /**
     * return currentPage for given id
     *
     * @param id unique id of the pagination component
     */
    getCurrentPage(id) {
        return this.instances[id].currentPage;
    }
};
AngularPaginatorService = tslib_1.__decorate([
    Injectable(),
    tslib_1.__metadata("design:paramtypes", [])
], AngularPaginatorService);
export { AngularPaginatorService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1wYWdpbmF0b3Iuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FuZ3VsYXItcGFnaW5hdG9yLyIsInNvdXJjZXMiOlsiYXBwL2FuZ3VsYXItcGFnaW5hdG9yL3NlcnZpY2VzL2FuZ3VsYXItcGFnaW5hdG9yLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBSXpELElBQWEsdUJBQXVCLEdBQXBDLE1BQWEsdUJBQXVCO0lBVWxDO1FBVEEsa0RBQWtEO1FBQ2xELE9BQUUsR0FBRywyQkFBMkIsQ0FBQztRQUVqQywyREFBMkQ7UUFDM0QsY0FBUyxHQUFRLEVBQUUsQ0FBQztRQUVwQix1RUFBdUU7UUFDdkUsV0FBTSxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO0lBRTFDLENBQUM7SUFFakI7Ozs7T0FJRztJQUNILGdCQUFnQixDQUFDLFFBQWtDO1FBRWpELElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNoQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUM7WUFDdkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQy9CO2FBQU07WUFDTCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzlDLElBQUksT0FBTyxFQUFFO2dCQUNYLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQzthQUMvQjtTQUNGO1FBRUQsT0FBTztJQUNULENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILGNBQWMsQ0FBQyxRQUFrQztRQUUvQyxLQUFLLE1BQU0sR0FBRyxJQUFJLFFBQVEsRUFBRTtZQUMxQixJQUFJLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDdEQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNqRCxPQUFPLElBQUksQ0FBQzthQUNiO1NBQ0Y7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsV0FBVyxDQUFDLEVBQVU7UUFDcEIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsY0FBYyxDQUFDLEVBQVU7UUFDdkIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQztJQUN4QyxDQUFDO0NBQ0YsQ0FBQTtBQW5FWSx1QkFBdUI7SUFEbkMsVUFBVSxFQUFFOztHQUNBLHVCQUF1QixDQW1FbkM7U0FuRVksdUJBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBbmd1bGFyUGFnaW5hdG9ySW5zdGFuY2UgfSBmcm9tICcuLi9vdGhlcnMvYW5ndWxhci1wYWdpbmF0b3IuaW50ZXJmYWNlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEFuZ3VsYXJQYWdpbmF0b3JTZXJ2aWNlIHtcbiAgLyoqIGlkIGlzIHVzZWQgdG8gaWRlbnRpZnkgcGFnaW5hdGlvbiBpbnN0YW5jZXMgKi9cbiAgaWQgPSAnQU5HVUxBUl9QQUdJTkFUT1JfREVGQVVMVCc7XG5cbiAgLyoqIGluc3RhbmNlcyBpcyB0aGUgY29sbGVjdGlvbiBvZiBwYWdpbmF0aW9uIGNvbXBvbmV0bnMgKi9cbiAgaW5zdGFuY2VzOiBhbnkgPSB7fTtcblxuICAvKiogZW1pdHMgYW4gZXZlbnQgd2l0aCBpbnN0YW5jZSBpZCB3aGVuZXZlciB0aGUgcGFnZSBudW1iZXIgY2hhbmdlcyAqL1xuICBjaGFuZ2U6IEV2ZW50RW1pdHRlcjxzdHJpbmc+ID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG5cbiAgY29uc3RydWN0b3IoKSB7IH1cblxuICAvKipcbiAgICogY3JlYXRlcyBhbiBpbnN0YW5jZSBmb3IgZXZlcnkgcGlwZSBkaWZmZXJlbnRpYXRlZCB3aXRoIGlkXG4gICAqXG4gICAqIEBwYXJhbSBpbnN0YW5jZSBlYWNoIGluc3RhbmNlIHJlZmVycyB0byBhIHVuaXF1ZSBwYWdpbmF0aW9uIGNvbXBvbmVudFxuICAgKi9cbiAgcmVnaXN0ZXJJbnN0YW5jZShpbnN0YW5jZTogQW5ndWxhclBhZ2luYXRvckluc3RhbmNlKTogdm9pZCB7XG5cbiAgICBpZiAoIXRoaXMuaW5zdGFuY2VzW2luc3RhbmNlLmlkXSkge1xuICAgICAgdGhpcy5pbnN0YW5jZXNbaW5zdGFuY2UuaWRdID0gaW5zdGFuY2U7XG4gICAgICB0aGlzLmNoYW5nZS5lbWl0KGluc3RhbmNlLmlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY2hhbmdlZCA9IHRoaXMudXBkYXRlSW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2UuZW1pdChpbnN0YW5jZS5pZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIHVwZGF0ZXMgZXhpc3RpbmcgcGFnaW5hdGlvbiBpbnN0YW5jZXMgYXZhaWxhYmxlXG4gICAqIGFuZCByZXR1cm5zIHRydWUgaWYgdmFsdWUgaGFzIGNoYW5nZWRcbiAgICpcbiAgICogQHBhcmFtIGluc3RhbmNlIGFuIHVuaXF1ZSBwYWdpbmF0aW9uIGNvbXBvbmVudFxuICAgKi9cbiAgdXBkYXRlSW5zdGFuY2UoaW5zdGFuY2U6IEFuZ3VsYXJQYWdpbmF0b3JJbnN0YW5jZSk6IGJvb2xlYW4ge1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gaW5zdGFuY2UpIHtcbiAgICAgIGlmIChpbnN0YW5jZVtrZXldICE9PSB0aGlzLmluc3RhbmNlc1tpbnN0YW5jZS5pZF1ba2V5XSkge1xuICAgICAgICB0aGlzLmluc3RhbmNlc1tpbnN0YW5jZS5pZF1ba2V5XSA9IGluc3RhbmNlW2tleV07XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm4gaW5zdGFuY2Ugd2l0aCBnaXZlbiBpZFxuICAgKlxuICAgKiBAcGFyYW0gaWQgdW5pcXVlIGlkIG9mIHRoZSBwYWdpbmF0aW9uIGNvbXBvbmVudFxuICAgKi9cbiAgZ2V0SW5zdGFuY2UoaWQ6IHN0cmluZyk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzW2lkXTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm4gY3VycmVudFBhZ2UgZm9yIGdpdmVuIGlkXG4gICAqXG4gICAqIEBwYXJhbSBpZCB1bmlxdWUgaWQgb2YgdGhlIHBhZ2luYXRpb24gY29tcG9uZW50XG4gICAqL1xuICBnZXRDdXJyZW50UGFnZShpZDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNbaWRdLmN1cnJlbnRQYWdlO1xuICB9XG59XG4iXX0=