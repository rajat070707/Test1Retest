!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("apollo-angular"),require("apollo-link"),require("apollo-cache-inmemory"),require("apollo-cache"),require("@angular/core"),require("graphql"),require("apollo-client")):"function"==typeof define&&define.amd?define("apollo-angular/testing",["exports","apollo-angular","apollo-link","apollo-cache-inmemory","apollo-cache","@angular/core","graphql","apollo-client"],o):o(((e=e||self)["apollo-angular"]=e["apollo-angular"]||{},e["apollo-angular"].testing={}),e["apollo-angular"],e.apolloLink.core,e.apollo.cache.inmemory,e.apolloCache,e.ng.core,e.graphql,e.apollo)}(this,function(e,o,t,r,n,i,a,p){"use strict";function c(e,o,t,r){var n,i=arguments.length,a=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,o,t,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(a=(i<3?n(a):i>3?n(o,t,a):n(o,t))||a);return i>3&&a&&Object.defineProperty(o,t,a),a}function l(e,o){return function(t,r){o(t,r,e)}}function u(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)}var f=function(){},s=function(e){return e&&e.hasOwnProperty("graphQLErrors")},h=function(){function e(e,o){this.operation=e,this.observer=o}return e.prototype.flush=function(e){s(e)?this.observer.error(e):(this.observer.next(e),this.observer.complete())},e.prototype.networkError=function(e){var o=new p.ApolloError({networkError:e});this.flush(o)},e.prototype.graphqlErrors=function(e){this.flush({errors:e})},e}(),y=function(){function e(){this.open=[]}return e.prototype.handle=function(e){var o=this;return new t.Observable(function(t){var r=new h(e,t);o.open.push(r)})},e.prototype._match=function(e){var o=this;return"string"==typeof e?this.open.filter(function(o){return o.operation.operationName===e}):"function"==typeof e?this.open.filter(function(o){return e(o.operation)}):this.isDocumentNode(e)?this.open.filter(function(o){return a.print(o.operation.query)===a.print(e)}):this.open.filter(function(t){return o.matchOp(e,t)})},e.prototype.matchOp=function(e,o){var t=JSON.stringify(e.variables),r=JSON.stringify(e.extensions),n=this.compare(e.operationName,o.operation.operationName),i=this.compare(t,o.operation.variables),p=a.print(o.operation.query)===a.print(e.query),c=this.compare(r,o.operation.extensions);return n&&i&&p&&c},e.prototype.compare=function(e,o){var t,r="string"==typeof(t=o)?t:JSON.stringify(t);return!e||r===e},e.prototype.match=function(e){var o=this,t=this._match(e);return t.forEach(function(e){var t=o.open.indexOf(e);-1!==t&&o.open.splice(t,1)}),t},e.prototype.expectOne=function(e,o){o=o||this.descriptionFromMatcher(e);var t=this.match(e);if(t.length>1)throw new Error('Expected one matching operation for criteria "'+o+'", found '+t.length+" operations.");if(0===t.length)throw new Error('Expected one matching operation for criteria "'+o+'", found none.');return t[0]},e.prototype.expectNone=function(e,o){o=o||this.descriptionFromMatcher(e);var t=this.match(e);if(t.length>0)throw new Error('Expected zero matching operations for criteria "'+o+'", found '+t.length+".")},e.prototype.verify=function(){var e=this.open;if(e.length>0){var o=e.map(function(e){return e.operation.operationName}).join(", ");throw new Error("Expected no open operations, found "+e.length+": "+o)}},e.prototype.isDocumentNode=function(e){return!e.operationName},e.prototype.descriptionFromMatcher=function(e){return"string"==typeof e?"Match operationName: "+e:"object"==typeof e?this.isDocumentNode(e)?"Match DocumentNode":"Match operation: "+(e.operationName||"(any)")+", variables: "+(JSON.stringify(e.variables)||"(any)"):"Match by function: "+e.name},e=c([i.Injectable()],e)}(),m=new i.InjectionToken("apollo-angular/testing cache"),g=function(){function e(e,o,n){e.create({link:new t.ApolloLink(function(e){return o.handle(e)}),cache:n||new r.InMemoryCache({addTypename:!1})})}return e=c([i.NgModule({imports:[o.ApolloModule],providers:[y,{provide:f,useExisting:y}]}),l(2,i.Optional()),l(2,i.Inject(m)),u("design:paramtypes",[o.Apollo,y,n.ApolloCache])],e)}();e.APOLLO_TESTING_CACHE=m,e.ApolloTestingController=f,e.ApolloTestingModule=g,e.TestOperation=h,e.Éµa=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngApolloTesting.umd.min.js.map